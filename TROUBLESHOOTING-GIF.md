# GIF 生成故障排查指南

## 常见问题和解决方案

### 🔴 问题 1: "GIF 生成失败：无法加载 gif.js 库"

**原因**: 
- 网络连接问题
- CDN 被屏蔽或无法访问

**解决方案**:
1. 检查网络连接是否正常
2. 尝试使用 VPN 或代理
3. 查看浏览器控制台（F12）是否有网络错误
4. 等待几分钟后重试

---

### 🔴 问题 2: "GIF 生成失败：没有捕获到动画帧"

**原因**:
- 动画没有正在运行
- SVG 渲染问题

**解决方案**:
1. **方式一**: 确保先点击播放按钮（右下角圆形按钮）
2. **方式二**: 确保点击了参数标签（Axis Count、Axis Stroke Width、Rotation）并且标签变粗体
3. 等待动画运行几秒钟后再点击 GIF 按钮
4. 刷新页面重试

---

### 🔴 问题 3: "加载库超时"

**原因**:
- 网络速度慢
- CDN 响应慢

**解决方案**:
1. 检查网络速度
2. 等待页面完全加载后再使用
3. 刷新页面，让浏览器重新加载资源
4. 清除浏览器缓存后重试

---

### 🔴 问题 4: 录制进度卡住不动

**原因**:
- 浏览器性能问题
- 参数设置过于复杂

**解决方案**:
1. 关闭其他浏览器标签
2. 减少参数复杂度：
   - 降低 Copies 数量
   - 降低 Axis Count 数值
   - 简化 Render Mode
3. 使用 Chrome 或 Firefox 浏览器（性能更好）
4. 重启浏览器

---

### 🔴 问题 5: GIF 下载了但文件损坏

**原因**:
- 录制过程中切换了标签页
- 浏览器在后台限制了渲染

**解决方案**:
1. 确保录制期间保持在当前标签页
2. 不要最小化浏览器窗口
3. 等待 "Processing..." 完全结束
4. 重新录制

---

## 🔍 调试步骤

### 1. 打开浏览器控制台
- **Chrome/Edge**: 按 `F12` 或 `Cmd+Option+I` (Mac)
- **Firefox**: 按 `F12` 或 `Cmd+Option+K` (Mac)
- **Safari**: 开发 → 显示 JavaScript 控制台

### 2. 查看控制台日志
录制过程中会输出详细日志：
```
🎬 开始录制 GIF (2000x2000)
Recording... 1/50
Recording... 2/50
...
✅ 录制完成，捕获了 50 帧
🎬 开始生成 GIF...
📊 捕获帧数: 50
📦 加载 gif.js 库...
✅ gif.js 加载成功
🎨 创建 GIF 对象...
📐 GIF 尺寸: 2000x2000
🖼️ 添加帧...
✅ 成功添加 50 帧
🚀 开始渲染 GIF...
⏳ 渲染进度: 25%
⏳ 渲染进度: 50%
⏳ 渲染进度: 75%
⏳ 渲染进度: 100%
✅ GIF 生成完成!
📦 文件大小: 2.45 MB
✅ GIF 已下载!
```

### 3. 检查错误信息
如果看到错误（红色文字），记录错误信息：
- 网络错误 → 检查网络连接
- 渲染错误 → 降低复杂度
- 内存错误 → 关闭其他程序

---

## ✅ 最佳实践

### 录制前准备
1. 确保网络连接正常
2. 关闭不必要的浏览器标签
3. 调整参数到合适的复杂度：
   - Copies: 1-5（推荐 3）
   - Axis Count: 12-36（推荐 24）
   - Width: 800-1500（推荐 1000）

### 录制过程中
1. 保持在当前标签页
2. 不要最小化窗口
3. 等待录制自动完成（5秒）
4. 观察按钮文字变化：
   - "Recording... X/50" → 正在录制
   - "Processing..." → 正在生成
   - "0%-100%" → 渲染进度
   - "GIF" → 完成

### 录制后
1. 检查下载文件夹
2. 文件名格式：`font-animation-{时间戳}.gif`
3. 文件大小：通常 1-10 MB
4. 用 GIF 查看器验证效果

---

## 🌐 浏览器兼容性

| 浏览器 | 支持情况 | 建议 |
|--------|---------|------|
| Chrome | ✅ 完全支持 | 推荐 |
| Firefox | ✅ 完全支持 | 推荐 |
| Safari | ⚠️ 部分支持 | 可能较慢 |
| Edge | ✅ 完全支持 | 推荐 |

---

## 💡 性能优化建议

### 如果 GIF 生成很慢：
1. **降低画布尺寸**：
   - Width 设置为 800-1200
   
2. **减少复杂度**：
   - Copies 设置为 1-3
   - Axis Count 设置为 12-24
   - 选择简单的 Render Mode

3. **使用方式二**：
   - 单参数循环比完整动画快
   - 只选择 1-2 个参数循环

### 如果 GIF 文件太大：
1. 使用在线 GIF 压缩工具
2. 减少 Width 和 Height
3. 减少动画复杂度

---

## 📞 仍然有问题？

如果以上方法都无法解决：

1. **记录详细信息**：
   - 浏览器版本
   - 操作系统
   - 控制台完整错误信息
   - 使用的参数设置

2. **检查基本条件**：
   - 是否有网络连接
   - 是否在支持的浏览器中
   - 是否允许下载文件

3. **尝试简化测试**：
   - 使用默认参数
   - 只测试 Rotation 单参数循环
   - 不使用 Grain 效果

---

## 🎯 快速诊断清单

- [ ] 网络连接正常
- [ ] 使用 Chrome/Firefox 浏览器
- [ ] 已开始动画（播放按钮或参数循环）
- [ ] 录制期间保持在当前标签页
- [ ] 浏览器控制台没有红色错误
- [ ] 等待完整的 5 秒录制时间
- [ ] 看到 "Processing..." 提示
- [ ] 看到渲染进度 0-100%
- [ ] 检查浏览器下载文件夹

如果所有项都打✓但仍然失败，请查看控制台的详细错误日志。
